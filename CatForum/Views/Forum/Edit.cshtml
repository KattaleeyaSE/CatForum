@using CatForum.Models;
@{
    ViewBag.Title = "Register";
    Layout = "~/Views/Shared/_Layout.cshtml";
    PostDetail post = ViewBag.post;
    Cat cat = post.Cat;
}

<div class="row">
    <div class="col-sm-12">
        <form method="POST" action="" enctype="multipart/form-data">
            <div class="form-group">
                <label for="Title">Title</label>
                <input type="text" class="form-control" id="PostTitle" name="PostTitle" placeholder="Title" value="@post.Post.Name" required>
            </div>
            <div class="form-group">
                <label for="PostType">Post Type</label>
                <select class="form-control" id="PostType" name="PostType" required>
                    @{
                        List<PostType> types = ViewBag.Types;
                        foreach (var obj in types)
                        {
                            <option value="@obj.Id" @if (obj.Id == post.TypeId) { @Html.Raw("selected")  }>@obj.Name</option>
                        }
                    }
                </select>
            </div>
            <div class="form-group">
                <label for="File">File input</label>
                <input type="File" id="File" name="File">
                <p class="help-block">Please upload this post image.</p>
            </div>
            <div class="form-group">
                <label>Province</label>
                <select class="form-control" id="Province" name="Province" required>
                    @{
                        List<Province> provList = ViewBag.Provinces;
                        foreach (var obj in provList)
                        {
                            <option value="@obj.Id" @if (obj.Id == post.Address.ProvinceId) { @Html.Raw("selected")  }>@obj.Name</option>
                        }
                    }
                </select>
                <select class="form-control" id="Amphur" name="Amphur" required>
                    @{
                        List<Amphur> ampList = ViewBag.Amphurs;
                        foreach (var obj in ampList)
                        {
                            <option value="@obj.Id" @if (obj.Id == post.Address.AmphurId) { @Html.Raw("selected")  }>@obj.Name</option>
                        }
                    }
                </select>
                <select class="form-control" id="Tumbon" name="Tumbon" required>
                    @{
                        List<Tumbon> tmbnList = ViewBag.Tumbons;
                        foreach (var obj in tmbnList)
                        {
                            <option value="@obj.Id" @if (obj.Id == post.Address.TumbonId) { @Html.Raw("selected")  }>@obj.Name</option>
                        }
                    }
                </select>
            </div>
            <div class="form-group">
                <label for="Condition">Post Detail</label>
                <textarea class="form-control" id="PostDetail" name="PostDetail" placeholder="Post Detail" required>@post.Post.Content</textarea>
            </div>
            <div class="form-group">
                <label>Post Status</label>
                <select class="form-control" id="PostStatus" name="PostStatus" required>
                    <option value="1" @if (post.Status == 1) { @Html.Raw("selected")  }>Active</option>
                    @*<option value="2" @if (post.Status == 2) { @Html.Raw("selected")  }>Delete</option>*@
                </select>
            </div>
            <div class="form-group searchForAdopt">
                <label for="Condition">Condition</label>
                <textarea class="form-control" id="Condition" name="Condition" placeholder="Condition">@post.Condition</textarea>
            </div>
            <div class="form-group searchForAdopt">
                <label for="Location">Location</label>
                <input type="text" class="form-control" id="Location" name="Location" placeholder="Location" value="@post.Location">
            </div>
            <div class="form-group searchForAdopt">
                <label for="Contact">Contact</label>
                <input type="text" class="form-control" id="Contact" name="Contact" placeholder="Contact" value="@post.Contact">
            </div>
            <div class="form-group">
                <label for="Fee">Fee</label>
                <input type="text" class="form-control" id="Fee" name="Fee" placeholder="Fee" value="@post.Fee">
            </div>
            <div class="form-group">
                <label for="CatName">Cat Name</label>
                <input type="text" class="form-control" id="CatName" name="CatName" placeholder="Cat's name" value="@cat.Name">
            </div>
            <div class="form-group">
                <label for="CatAge">Cat Age</label>
                <input type="text" class="form-control" id="CatAge" name="CatAge" placeholder="Cat's Age'" value="@cat.Age">
            </div>
            <div class="form-group searchForAdopt">
                <label>Cat Life Stage</label>
                <select class="form-control" id="LifeStage" name="LifeStage">
                    @{
                        List<CatLifeStage> catlife = ViewBag.LifeStages;
                        foreach (var obj in catlife)
                        {
                            <option value="@obj.Id" @if (obj.Id == cat.LifeStageId) { @Html.Raw("selected")  }>@obj.Stage</option>
                        }
                    }
                </select>
            </div>
            <div class="form-group">
                <label>Cat Gender</label>
                <select class="form-control" id="Gender" name="Gender">
                    <option value="1" @if (cat.Gender == 1) { @Html.Raw("selected")  }>Male</option>
                    <option value="2" @if (cat.Gender == 2) { @Html.Raw("selected")  }>Female</option>
                </select>
            </div>
            <div class="form-group">
                <label>Cat Eyes Color</label>
                <select class="form-control" id="CatEyes" name="CatEyes">
                    @{
                        List<CatEyes> eyes = ViewBag.Eyes;
                        foreach (var obj in eyes)
                        {
                            <option value="@obj.Id" @if (obj.Id == cat.EyesId) { @Html.Raw("selected")  }>@obj.Color</option>
                        }
                    }
                </select>
            </div>
            <div class="form-group">
                <label>Cat Coat Color</label>
                <select class="form-control" id="CatCoat" name="CatCoat">
                    @{
                        List<CatCoat> coats = ViewBag.Coats;
                        foreach (var obj in coats)
                        {
                            <option value="@obj.Id" @if (obj.Id == cat.CoatId) { @Html.Raw("selected")  }>@obj.Color</option>
                        }
                    }
                </select>
            </div>
            <div class="form-group">
                <label>Cat Coat Pattern</label>
                <select class="form-control" id="CatPattern" name="CatPattern">
                    @{
                        List<CatPattern> patterns = ViewBag.Patterns;
                        foreach (var obj in patterns)
                        {
                            <option value="@obj.Id" @if (obj.Id == cat.PatternId) { @Html.Raw("selected")  }>@obj.Appearance</option>
                        }
                    }
                </select>
            </div>
            <div class="form-group">
                <label>Cat Tail</label>
                <select class="form-control" id="CatTail" name="CatTail">
                    @{
                        List<CatTail> tails = ViewBag.Tails;
                        foreach (var obj in tails)
                        {
                            <option value="@obj.Id" @if (obj.Id == cat.TailId) { @Html.Raw("selected")  }>@obj.Appearance</option>
                        }
                    }
                </select>
            </div>
            <div class="form-group searchForAdopt">
                <label>Cat Breed</label>
                <select class="form-control" id="CatBreed" name="CatBreed">
                    @{
                        List<CatBreed> breeds = ViewBag.Breeds;
                        foreach (var obj in breeds)
                        {
                            <option value="@obj.Id" @if (obj.Id == cat.BreedId) { @Html.Raw("selected")  }>@obj.Name</option>
                        }
                    }
                </select>
            </div>
            <div class="cat-adoption" stylre="display: none;">
                <div class="form-group">
                    <label for="Username">Cat Food| Like</label>
                    <input type="text" class="form-control" id="FoodLike" name="FoodLike" placeholder="Favorite food" value="@cat.FoodLike">
                </div>
                <div class="form-group">
                    <label for="Username">Cat Food| Dislike</label>
                    <input type="text" class="form-control" id="FoodDislike" name="FoodDislike" placeholder="Hated food" value="@cat.FoodDislike">
                </div>
                <div class="form-group">
                    <label for="Username">Cat Habit</label>
                    <input type="text" class="form-control" id="Habit" name="Habit" placeholder="What it usually do?" value="@cat.Habit">
                </div>
                <div class="form-group">
                    <label for="Username">Cat Hate</label>
                    <input type="text" class="form-control" id="Hate" name="Hate" placeholder="What is hate most?" value="@cat.Hate">
                </div>
                <div class="form-group">
                    <label for="Username">Cat Vaccine</label>
                    <input type="text" class="form-control" id="Vaccine" name="Vaccine" placeholder="List of Vaccines" value="@cat.Habit">
                </div>
            </div>
            <div class="form-group">
                <label for="Username">Cat Description</label>
                <textarea type="text" class="form-control" id="CatDescription" name="CatDescription" placeholder="Description">@cat.Description</textarea>
            </div>
            <div class="form-group searchForAdopt">
                <label>Cat Status</label>
                <select class="form-control" id="CatStatus" name="CatStatus">
                    <option></option>
                    <option value="1" @if (cat.Status == 1) { @Html.Raw("selected")  } data-status="1" style="display: none;">Finding</option>
                    <option value="2" @if (cat.Status == 2) { @Html.Raw("selected")  } data-status="2" style="display: none;">Found</option>
                    <option value="3" @if (cat.Status == 3) { @Html.Raw("selected")  } data-status="3" style="display: none;">Search for Adoption</option>
                    <option value="4" @if (cat.Status == 4) { @Html.Raw("selected")  } data-status="4" style="display: none;">Adopted</option>
                    <option value="5" @if (cat.Status == 5) { @Html.Raw("selected")  } data-status="5" style="display: none;">Want to Adopt</option>
                </select>
            </div>
            @*<div class="alert alert-danger" role="alert">...</div>*@
            <button type="submit" class="btn btn-default">Save</button><a href="/User/Forums"><button class="btn btn-block btn-warning">Cancle</button></a>
        </form>
    </div>
</div>
@section scripts{
    <script>
        $('#Post').validate({
            submitHandler: function (form) {
                form.submit();
            }
        });
        function hideCat() {
            $("#CatName").parent().hide();
            $("#CatAge").parent().hide();
            $("#LifeStage").parent().hide();
            $("#Gender").parent().hide();
            $("#CatEyes").parent().hide();
            $("#CatCoat").parent().hide();
            $("#CatPattern").parent().hide();
            $("#CatTail").parent().hide();
            $("#CatBreed").parent().hide();
            $("#FoodLike").parent().hide();
            $("#FoodDislike").parent().hide();
            $("#Habit").parent().hide();
            $("#Hate").parent().hide();
            $("#Vaccine").parent().hide();
            $("#CatDescription").parent().hide();
            $("#CatStatus").parent().hide();
        }
        hideCat();
        function hideCondition() {
            $("#Condition").parent().hide();
            $("#Location").parent().hide();
            $("#Contact").parent().hide();
            $("#Fee").parent().hide();
        }
        hideCondition();
        function showCat() {
            $("#CatName").parent().show();
            $("#CatAge").parent().show();
            $("#LifeStage").parent().show();
            $("#Gender").parent().show();
            $("#CatEyes").parent().show();
            $("#CatCoat").parent().show();
            $("#CatPattern").parent().show();
            $("#CatTail").parent().show();
            $("#CatBreed").parent().show();
            $("#FoodLike").parent().show();
            $("#FoodDislike").parent().show();
            $("#Habit").parent().show();
            $("#Hate").parent().show();
            $("#Vaccine").parent().show();
            $("#CatDescription").parent().show();
            $("#CatStatus").parent().show();
        }
        function showCondition() {
            $("#Condition").parent().show();
            $("#Location").parent().show();
            $("#Contact").parent().show();
            $("#Fee").parent().show();
        }
        function showStatus(id) {
            $("[data-status=" + id + "]").show();
        }
        function hideStatus() {
            $("[data-status=1]").hide();
            $("[data-status=2]").hide();
        }
        function showAdoption() {
            $(".cat-adoption").show();
        }
        function hideAdoption() {
            $(".cat-adoption").hide();
        }
        hideStatus();
        $("#PostType").on("change", function (e) {
            //var value = $(this).val();
            //hideAdoption();
            //hideCat(); hideCondition();
            //if (value == 1 || value == 2) { hideCat(); hideCondition(); }
            //else if (value == 3 || value == 4 || value == 5) { showCat(); showCondition(); }
            //else if (value == 6) { hideCat(); showCondition(); }
            //else if (value == 7) {
            //    $(".searchForAdopt").show();
            //}

            //if (value == 3) { hideStatus(); showStatus(2); }
            //else if (value == 4) { hideStatus(); showStatus(1); }
            //else if (value == 5) { hideStatus(); showStatus(3); }
            //else if (value == 7) { hideStatus(); showStatus(4); }

            //if (value == 5 || value == 7) {
            //    showAdoption();
            //}
            check();
        });
        function check() {
            var value = $("#PostType").val();
            hideAdoption();
            hideCat(); hideCondition();
            if (value == 1 || value == 2) { hideCat(); hideCondition(); }
            else if (value == 3 || value == 4 || value == 5) { showCat(); showCondition(); }
            else if (value == 6) { hideCat(); showCondition(); }
            else if (value == 7) {
                $(".searchForAdopt").show();
            }

            if (value == 3) { hideStatus(); showStatus(2); }
            else if (value == 4) { hideStatus(); showStatus(1); }
            else if (value == 5) { hideStatus(); showStatus(3); }
            else if (value == 7) { hideStatus(); showStatus(4); }

            if (value == 5 || value == 7) {
                showAdoption();
            }
        }
        check();
    </script>
}
