@using CatForum.Repositories
@{
    ViewBag.Title = "Home Page";
    PostDetailRepository posts = ViewBag.PostRepo;
    var count = 1;
}
<div class="row">
    <div class="col-sm-12">
        <h3>SOS in your area.</h3>
        <div>
            @{
                var soses = posts.SelectDescDate(6, 0);
            }
            <ul class="bxslider">
                @{
                    foreach (var sos in soses)
                    {
                        var image = sos.Post.Pictures.FirstOrDefault();
                        <li>
                            @if (image != null)
                            {
                                <img src="/File?Id=@image.Id" width="150" style="display: inline-block;" />
                            }
                            <a href="/Forum/Detail/@sos.Id">
                                @sos.Post.Name : @sos.Condition
                            </a>
                        </li>
                    }
                }

            </ul>
            <div class="text-right">
                <a href="/Forum/Search?Type=6">More!</a>
            </div>
        </div>
    </div>
    <div class="col-sm-12">
        <div>

            <!-- Nav tabs -->
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#update" aria-controls="update" role="tab" data-toggle="tab">Update</a></li>
                <li role="presentation"><a href="#followed" aria-controls="followed" role="tab" data-toggle="tab">Forum Followed</a></li>
                <li role="presentation"><a href="#adoption" aria-controls="adoption" role="tab" data-toggle="tab">My Adoption</a></li>
                <li role="presentation"><a href="#lostAndFound" aria-controls="lostAndFound" role="tab" data-toggle="tab">Lost & Found</a></li>
            </ul>

            <!-- Tab panes -->
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="update">
                    <div>
                        <h3>Lost Cat</h3>
                        @{
                            var losts = posts.SelectDescDate(4, 0);
                        }
                        <ul class="bxslider">
                            @{
                                count = 1;
                                foreach (var obj in losts)
                                {
                                    var image = obj.Post.Pictures.FirstOrDefault();
                                    if (count == 1)
                                    { @Html.Raw("<li>")                             }
                                    if (image != null)
                                    {
                                        <a href="/Forum/Detail/@obj.Id">
                                            <img height="150" width="150" src="/File?Id=@image.Id" style="display: inline-block" />
                                        </a>
                                    }
                                    if (count == 4 || losts.Last().Equals(obj))
                                    {
                                        @Html.Raw("</li>")
                                        count = 1;
                                    }
                                    else
                                    {
                                        count++;
                                    }
                                }
                            }
                        </ul>
                    </div>
                    <div>
                        <h3>Find Owner</h3>
                        @{
                            var finds = posts.SelectDescDate(3, 0);
                        }
                        <ul class="bxslider">
                            @{
                                count = 1;
                                foreach (var obj in finds)
                                {
                                    var image = obj.Post.Pictures.FirstOrDefault();
                                    if (count == 1)
                                    { @Html.Raw("<li>") }
                                    if (image != null)
                                    {
                                        <a href="/Forum/Detail/@obj.Id">
                                            <img height="150" width="150" src="/File?Id=@image.Id" style="display: inline-block" />
                                        </a>
                                    }
                                    if (count == 4 || finds.Last().Equals(obj))
                                    {
                                        @Html.Raw("</li>")
                                        count = 1;
                                    }
                                    else
                                    {
                                        count++;
                                    }
                                }
                            }
                        </ul>
                    </div>
                    <div>
                        <h3>SOS</h3>
                        @*@{
                                var sos = posts.SelectDescDate(4, 0);
                            }*@
                        <ul class="bxslider">
                            @{
                                count = 1;
                                foreach (var obj in soses)
                                {
                                    var image = obj.Post.Pictures.FirstOrDefault();
                                    if (count == 1)
                                    { @Html.Raw("<li>") }
                                    if (image != null)
                                    {
                                        <a href="/Forum/Detail/@obj.Id">
                                            <img height="150" width="150" src="/File?Id=@image.Id" style="display: inline-block" />
                                        </a>
                                    }
                                    if (count == 4 || losts.Last().Equals(obj))
                                    {
                                        @Html.Raw("</li>")
                                        count = 1;
                                    }
                                    else
                                    {
                                        count++;
                                    }
                                }
                            }
                        </ul>
                    </div>
                    <div>
                        <h3>Adoption</h3>
                        @{
                            var adopts = posts.SelectDescDate(5, 0);
                        }
                        <ul class="bxslider">
                            @{
                                count = 1;
                                foreach (var obj in adopts)
                                {
                                    var image = obj.Post.Pictures.FirstOrDefault();
                                    if (count == 1)
                                    { @Html.Raw("<li>") }
                                    if (image != null)
                                    {
                                        <a href="/Forum/Detail/@obj.Id">
                                            <img height="150" width="150" src="/File?Id=@image.Id" style="display: inline-block" />
                                        </a>
                                    }
                                    if (count == 4 || losts.Last().Equals(obj))
                                    {
                                        @Html.Raw("</li>")
                                        count = 1;
                                    }
                                    else
                                    {
                                        count++;
                                    }
                                }
                            }
                        </ul>
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane" id="followed">
                    <div class="row">
                        <div class="col-sm-3"><img height="150" width="150" /></div>
                        <div class="col-sm-9">
                            <div>Post: </div>
                            <div>Have been updated: </div>
                            <div><a href="#">Check</a></div>
                        </div>
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane" id="adoption">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="col-sm-4"><img width="100" height="100" /></div>
                            <div class="col-sm-8">
                                <div>Name: </div>
                                <div>Contact: </div>
                                <div><a href="#">Accecpt</a> | <a href="#">Reject</a></div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="col-sm-4"><img width="100" height="100" /></div>
                            <div class="col-sm-8">
                                <div>Name: </div>
                                <div>Contact: </div>
                                <div>Message: </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane" id="lostAndFound">
                    <div class="row">
                        <div class="col-sm-3"><img height="150" width="150" /></div>
                        <div class="col-sm-9">
                            <div>Description: </div>
                            <div>Address: </div>
                            <div>Contact: </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>